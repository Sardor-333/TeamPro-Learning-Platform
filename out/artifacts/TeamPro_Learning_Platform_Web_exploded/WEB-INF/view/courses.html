<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"><link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css'>

    <title>Category</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- Font Awesome -->
    <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
            rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
            href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
            rel="stylesheet"
    />
    <!-- MDB -->
    <link
            href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.10.2/mdb.min.css"
            rel="stylesheet"
    />
    <!-- MDB -->
    <script
            type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.10.2/mdb.min.js"
    ></script>


</head>
<body>
<div class="container">
    <a th:if="${role=='ADMIN' or role=='SUPER ADMIN'}" th:href="@{/courses/add}" class="btn btn-success"> + Add
        Course</a>
    <br>
    <br>
    <div class="row">
        <div class="col-md-4 mt-4" th:each="course : ${courses}">
            <div class="card" style="width: 18rem;">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRRGdQdvMAIY-XdwB8N3g7jaTZDFhNrqtd3rw&usqp=CAU">
                <div class="card-body">
                    <a th:href="@{'/modules/' + ${course.id}}"><h5 class="card-title" th:text="${course.name}"></h5></a>
                    <p class="card-text"></p>
                    <a th:if="${role=='ADMIN' or role=='SUPER ADMIN'}" th:href="@{'/courses/update/' + ${course.id}}"
                       class="card-link" th:text="EDIT"></a>
                    <a th:if="${role=='ADMIN' or role=='SUPER ADMIN'}" th:href="@{/courses/delete(id=${course.id})}"
                       class="card-link" th:text="DELETE"></a>
                </div>
            </div>
        </div>
    </div>
</div>

<!--<div class="container">-->
<!--    <br>-->
<!--    <a th:if="${role=='ADMIN' or role=='SUPER ADMIN'}" th:href="@{/courses/add}" class="btn btn-success"> + Add-->
<!--        Course</a>-->
<!--    <br>-->
<!--    <br>-->
<!--    <table class="table table-hover">-->
<!--        <thead>-->
<!--        <tr>-->
<!--            <th>Name</th>-->
<!--            <th>Description</th>-->
<!--            <th th:if="${role=='ADMIN' or role=='SUPER ADMIN'}">Edit</th>-->
<!--            <th th:if="${role=='ADMIN' or role=='SUPER ADMIN'}">Delete</th>-->
<!--        </tr>-->
<!--        </thead>-->
<!--        <tbody>-->
<!--        <tr th:each="course : ${courses}">-->
<!--            <td>-->
<!--                <a th:href="@{'/modules/' + ${course.id}}"-->
<!--                   th:text="${course.name}"></a>-->
<!--            </td>-->

<!--            <td th:text="${course.description}"></td>-->

<!--            <td th:if="${role=='ADMIN' or role=='SUPER ADMIN'}">-->
<!--                <a th:href="@{'/courses/update/' + ${course.id}}" class="btn btn-primary btn-sm">-->
<!--                    Edit-->
<!--                </a>-->
<!--            </td>-->

<!--            <td th:if="${role=='ADMIN' or role=='SUPER ADMIN'}"><a th:href="@{/courses/delete(id=${course.id})}"-->
<!--                                                                   class="btn btn-danger btn-sm">-->
<!--                <span class="glyphicon glyphicon-trash"></span> Delete </a></td>-->
<!--            <td>-->
<!--                <a th:href="@{'/courses/' + ${course.id}}" class="btn btn-primary btn-sm">-->
<!--                    View-->
<!--                </a>-->
<!--            </td>-->

<!--        </tr>-->
<!--        </tbody>-->
<!--    </table>-->
<!--</div>-->


<div class="Display flex justi fy content center">
    <div  class="d-flex" th:if="${pageCount>1}">

        <div th:if="${currentPage>1}">
            <a class="btn btn-warning" style="color: black" th:href="'/courses?page='+(${currentPage}-1)" th:text="'PREV'"></a>
        </div>
        <a class="btn btn-warning" th:if="${currentPage!=1}" style="color: black" th:href="'/courses?page=1'" th:text="'1'"></a>
        <button class="btn btn-info" th:if="${currentPage==1}" style="color: black" disabled th:text="'1'"></button>
        <a class="btn btn-warning" th:if="${currentPage!=2}" style="color: black" th:href="'/courses?page=2'" th:text="'2'"></a>
        <button class="btn btn-info" th:if="${currentPage==2}" style="color: black" disabled th:text="'2'"></button>
        <div th:if="${beginPage>3}">
            <button class="btn btn-warning" style="color: black" disabled th:text="'...'"></button>
        </div>
        <!--//////////////////////////////////////////////////////////////////////-->

        <div th:each="v_page: ${listPage}">
            <a class="btn btn-warning" th:if="${currentPage!=v_page}" style="color: black" th:href="'/courses?page='+${v_page}" th:text="${v_page}"></a>
            <button class="btn btn-info" th:if="${currentPage==v_page}" style="color: black" disabled th:text="${v_page}"></button>
        </div>

        <!--//////////////////////////////////////////////////////////////////////-->
        <div th:if="${endPage} < ${pageCount}-2">
            <button class="btn btn-warning" style="color: black" disabled  th:text="'...'"></button>
        </div>
        <div th:if="${pageCount>3}">
            <a class="btn btn-warning" th:if="${currentPage}!=${pageCount}-1" style="color: black" th:href="'/courses?page='+(${pageCount}-1)" th:text="${pageCount}-1"></a>
            <button class="btn btn-info" th:if="${currentPage}==${pageCount}-1" style="color: black" disabled th:text="${pageCount}-1"></button>
        </div>
        <div th:if="${pageCount>2}">
            <a class="btn btn-warning" th:if="${currentPage!=pageCount}" style="color: black" th:href="'/courses?page='+${pageCount}" th:text="${pageCount}"></a>
            <button class="btn btn-info" th:if="${currentPage==pageCount}" style="color: black" disabled th:text="${pageCount}"></button>
        </div>
        <div th:if = "${pageCount>currentPage}">
            <a class="btn btn-warning" style="color: black" th:href="'/courses?page='+(${currentPage}+1)" th:text="'NEXT'"></a>
        </div>

    </div>
</div>

<script>
    function makeDeleteUserRequest(url) {
        console.log(url)
        fetch(url,
            {
                method: 'DELETE'
            }
        ).then(response => location.reload())
    }
</script>

</body>

</html>
